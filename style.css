/* --- ShiftV Liquid Glass Redesign --- */

:root {
    /* --- Color Scheme --- */
    color-scheme: light dark;

    /* --- Base Font --- */
    --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;

    /* --- Border Radius --- */
    --radius-xl: 30px;
    --radius-l: 20px;
    --radius-m: 15px;
    --radius-s: 10px;

    /* --- Transitions --- */
    --transition-fast: all 0.2s ease-out;
    --transition-medium: all 0.3s ease-out;

    /* --- Dark Mode Variables (Default) --- */
    --bg-main: #1a1a3a;
    --text-main: #f0f0ff;
    --text-dim: #a8a8d8;
    --text-dim2: #a8a8d8;
    --primary: #ff8fcd;
    --accent: #ff60a8;
    --danger: #ff5577;
    --positive: #55f0d0;
    --warning-text: #ffddaa;

    --glass-bg: rgba(42, 42, 98, 0.4);
    --glass-bg1: rgba(182, 182, 212, 0.5);
    --glass-border: rgba(180, 180, 255, 0.2);
    --glass-shadow: rgba(0, 0, 0, 0.25);
    --glass-glow: rgba(255, 120, 200, 0.2);

    /* ▼▼▼ 모달 전용 변수 추가 ▼▼▼ */
    --modal-bg: rgba(42, 42, 98, 0.6);
    --modal-border: var(--glass-border);

    --input-bg: rgba(255, 255, 255, 0.05);
    --input-border: rgba(180, 180, 255, 0.15);
    --input-focus-border: var(--primary);
    --input-focus-glow: rgba(255, 143, 205, 0.3);

    --tab-bar-bg: rgba(30, 30, 72, 0.4);
    --tab-active-bg: var(--accent);
    --tab-active-text: #1a1a3a;

    --table-header-bg: rgba(122, 11, 192, 0.2);
    --table-row-stripe-bg: rgba(255, 255, 255, 0.03);
    --table-row-hover-bg: rgba(122, 11, 192, 0.3);
    --chart-button-bg: rgba(255, 255, 255, 0.05);
    --chart-wrapper-bg: rgba(0, 0, 0, 0.15);
}

body.light-mode {
    /* --- Light Mode Variable Overrides --- */
    --bg-main: #fdeef5;
    --text-main: #2c2c58;
    --text-dim: #525273;
    --text-dim2: #383858;
    --primary: #ff6f91;
    --accent: #e04f9e;
    --danger: #dc143c;
    --positive: #008060;
    --warning-text: #8B0000;

    --glass-bg: rgba(255, 255, 255, 0.5);
    --glass-border: rgba(255, 111, 145, 0.3);
    --glass-shadow: rgba(100, 100, 150, 0.15);
    --glass-glow: rgba(255, 111, 145, 0.2);

    /* ▼▼▼ 라이트 모드 모달 전용 변수 추가 ▼▼▼ */
    --modal-bg: rgba(253, 238, 245, 0.85);
    /* 밝고 부드러운 분홍빛 배경 */
    --modal-border: rgba(255, 111, 145, 0.3);

    --input-bg: rgba(255, 255, 255, 0.6);
    --input-border: rgba(222, 180, 200, 0.5);
    --input-focus-border: var(--primary);
    --input-focus-glow: rgba(255, 111, 145, 0.3);

    --tab-bar-bg: rgba(255, 255, 255, 0.4);
    --tab-active-bg: rgba(255, 96, 168, 0.2);
    --tab-active-text: #ffffff;

    --table-header-bg: rgba(255, 143, 171, 0.2);
    --table-row-stripe-bg: rgba(0, 0, 0, 0.02);
    --table-row-hover-bg: rgba(255, 111, 145, 0.1);
    --chart-button-bg: rgba(0, 0, 0, 0.05);
    --chart-wrapper-bg: rgba(0, 0, 0, 0.03);

    /* ** NEW ** Explicit styling for chart buttons in light mode */
    .chart-select-button {
        background-color: rgba(0, 0, 0, 0.05);
        /* 밝은 회색 배경 */
        border-color: rgba(0, 0, 0, 0.1);
        color: var(--text-dim2);
    }

    .chart-select-button.active {
        color: #ffffff !important;
        /* 활성화 시 텍스트 색상을 흰색으로 고정 */
    }
}

body.light-mode .data-item {
    background-color: color-mix(in srgb, #ff6f91 5%, transparent);
    border: 1px solid rgba(222, 180, 200, 0.5);
    /* 테두리를 추가하여 구분감을 줍니다 */
}

/* --- Base Styles --- */
*,
*::before,
*::after {
    box-sizing: border-box;
}

html {
    height: 100%;
    /* 전체 높이 기준을 명확하게 설정 */
}

body {
    font-family: var(--font-family);
    line-height: 1.6;
    margin: 0;
    background-color: var(--bg-main);
    color: var(--text-main);

    /* 기존: overscroll-behavior-y: contain; */
    /* 수정: y축 스크롤 경계 효과를 완전히 제거하여 화살표 힌트를 차단합니다. */
    overscroll-behavior-y: none;

    /* ▼▼▼ 추가된 부분: 배경과 텍스트 색상을 5초 동안 부드럽게 전환 ▼▼▼ */
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
}

.app-wrapper {
    display: flex;
    flex-direction: row;
    /* 사이드바와 콘텐츠를 가로로 배치 */
    height: 100vh;
}

.container {
    flex-grow: 1;
    /* 남은 공간을 모두 차지하도록 설정 */
    padding: 20px;
    max-width: 1200px;
    /* 메인 콘텐츠 최대 너비 (선택사항) */
    margin: 0 auto;
    overflow-y: auto;
    /* 콘텐츠가 길어지면 여기서 스크롤 */
    height: 100vh;
}


.title-container {
    position: relative;
    /* 겹쳐질 자식 이미지들의 기준점이 됨 */
    max-width: 80%;
    /* 기존 스타일 유지 */
    height: 120px;
    /* 로고의 최대 높이만큼 공간을 미리 확보 */
    margin: auto;
    /* 중앙 정렬 */
    margin-bottom: 5px;
}

/* 두 로고 이미지에 대한 공통 스타일 */
.title-container img {
    position: absolute;
    /* 이미지를 겹치기 위해 absolute 포지션 적용 */
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    /* 정확한 중앙 정렬 */
    width: auto;
    max-height: 100%;
    /* 부모 높이에 맞춤 */

    /* 핵심: 5초 동안 opacity(투명도)가 부드럽게 변하도록 설정 */
    transition: opacity 10s ease-in-out;
}

/* 기본 상태 (다크 모드) */
#main-title-dark {
    opacity: 1;
    /* 다크 모드 로고 보이기 */
}

#main-title-light {
    opacity: 0;
    /* 라이트 모드 로고 숨기기 */
}

/* 라이트 모드가 적용되었을 때의 상태 */
body.light-mode #main-title-dark {
    opacity: 0;
    /* 다크 모드 로고 숨기기 */
}

body.light-mode #main-title-light {
    opacity: 1;
    /* 라이트 모드 로고 보이기 */
}

.version-info {
    text-align: center;
    color: var(--text-dim);
    font-size: 0.8em;
    margin-bottom: 20px;
}

h2,
h3 {
    text-align: left;
}

h2 {
    font-size: 1.6em;
    color: var(--primary);
    margin: 0 0 25px 0;
}

h3 {
    font-size: 1.2em;
    color: var(--accent);
    margin: 25px 0 15px 0;
}

p.description {
    font-size: 0.9em;
    color: var(--text-dim);
    margin: -15px 0 20px 0;
}

hr.divider {
    border: none;
    height: 1px;
    background-image: linear-gradient(to right, transparent, var(--glass-border), transparent);
    margin: 35px 0;
}


.glass-card {
    background-color: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-l);
    padding: 25px;
    /* 모바일과 데스크탑 모두에 적합하도록 패딩 조정 */
    box-shadow: 0 8px 32px 0 var(--glass-shadow);
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    transition: background-color 5s ease-in-out, border-color 5s ease-in-out, box-shadow 5s ease-in-out;
}

.glass-section {
    background-color: transparent;
    /* 내부 섹션은 배경을 투명하게 */
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-m);
    padding: 20px;
    /* 내부 섹션 패딩 */
    margin-bottom: 20px;
    box-shadow: none;
    /* 내부 섹션은 그림자 제거 */
    backdrop-filter: none;
    /* 내부 섹션은 블러 효과 제거 */
    -webkit-backdrop-filter: none;
}

/* --- Tab Bar --- */
.tab-bar {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: 20px 0;
    gap: 15px;
    position: sticky;
    top: 0;
    height: 100vh;
    width: 55px;
    /* 기본 너비 */
    flex-shrink: 0;
    background-color: var(--glass-bg);
    border-right: 1px solid var(--glass-border);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: background-color 5s ease-in-out, color 5s ease-in-out, width 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    /* 부드러운 애니메이션 */
    z-index: 200;
}

.tab-button {
    display: flex;
    position: relative;
    align-items: center;
    width: 100%;
    height: 50px;
    /* 패딩 값으로 아이콘을 정확히 중앙에 배치 (60px 너비 - 24px 아이콘) / 2 = 18px */
    padding: 0 15px;
    cursor: pointer;
    border: none;
    background-color: transparent;
    color: var(--text-dim);
    font-weight: 500;
    white-space: nowrap;
    transition: color 0.3s ease;
    outline: none;
    overflow: hidden;
    transition: color 0.3s ease-in-out, color 0.3s ease-in-out;
    /* 내부 요소가 넘치지 않도록 방지 */
}

.tab-button svg {
    /* flex-shrink: 0; */
    /* 이 줄을 삭제하고 아래 코드로 대체 */
    flex: 0 0 24px;
    /* ✅ 아이콘이 절대 늘어나거나 줄어들지 않고, 기본 너비를 24px로 고정 */
    width: 24px;
    height: 24px;
    fill: currentColor;
    min-width: 24px;
    min-height: 24px;

}


.tab-button span {
    margin-left: 17px;
    font-size: 0.9em;
    font-weight: 600;
    opacity: 0;
    max-width: 0;
    visibility: hidden;
    /* [추가] 요소를 확실히 숨깁니다. */
    transition: max-width 0.3s ease-out, opacity 0.2s ease-out, visibility 0s 0.2s;
}

.tab-button.active {
    color: var(--primary);
}

.tab-button .active-tab-indicator {
    position: absolute;
    top: 50%;
    left: 10px;
    right: 10px;
    height: calc(100% - 10px);
    transform: translateY(-50%);
    background-color: var(--accent);
    border-radius: var(--radius-m);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.tab-button.active .active-tab-indicator {
    opacity: 0.15;
}

/* --- EXPANDED STATE --- */
.tab-bar.tab-bar-expanded {
    width: 150px;
    /* 확장 시 너비 */
}

.tab-bar:hover .tab-button span,
.tab-bar.tab-bar-expanded .tab-button span {
    opacity: 1;
    max-width: 100px;
    /* 텍스트가 차지할 최대 너비 */
    visibility: visible;
    /* [추가] 요소를 다시 보이게 합니다. */
    transition: max-width 0.3s ease-out, opacity 0.2s ease-out 0.1s;
}

/* --- 데스크톱에서는 여전히 호버(hover)가 작동하도록 설정 --- */
@media (hover: hover) {
    .tab-bar:hover {
        width: 120px;
    }

    .tab-bar:hover .tab-button span {
        opacity: 1;
        visibility: visible;
        transform: translateX(0);
    }

    .tab-bar:hover .tab-button {
        justify-content: flex-start;
    }
}





/* --- Forms & Inputs --- */
.input-grid,
.target-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    margin-bottom: 8px;
    font-weight: 500;
    font-size: 0.9em;
    color: var(--text-dim);
}



.input-category {
    border: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.input-category legend {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--primary);
    padding-bottom: 10px;
    width: 100%;
    margin-bottom: 16px;
}

/* ** NEW ** Spacing for specific form elements */
#note-form-area label[for="note-content"] {
    margin-top: 15px;
}

#measurement-form fieldset.input-category~fieldset.input-category {
    margin-top: 30px;
}

#measurement-form .form-group[data-lang-key*="estradiol"],
#measurement-form .form-group[data-lang-key*="progesterone"],
#measurement-form .form-group[data-lang-key*="antiAndrogen"],
#measurement-form .form-group[data-lang-key*="testosterone"],
#measurement-form .form-group[data-lang-key*="medicationOtherName"] {
    margin-top: 10px;
}

input,
textarea,
select {
    padding: 12px 15px;
    border: 1px solid var(--input-border);
    border-radius: var(--radius-s);
    font-size: 1em;
    background-color: var(--input-bg);
    color: var(--text-main);
    width: 100%;
    transition: border-color 0.2s ease-out, box-shadow 0.2s ease-out,
        background-color 5s ease-in-out, color 5s ease-in-out;
}

body.dark-mode select,
body.dark-mode select option {
    background-color: #2b2b5c;
    color: #f0f0ff;
}

input:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: var(--input-focus-border);
    box-shadow: 0 0 0 3px var(--input-focus-glow);
}

input.invalid-input {
    border-color: var(--danger) !important;
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--danger) 30%, transparent) !important;
}

.compound-input {
    display: flex;
    gap: 10px;
}

/* --- Buttons --- */
.button-group {
    text-align: center;
    margin-top: 30px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
}

.glass-button {
    padding: 12px 25px;
    cursor: pointer;
    border: 1px solid transparent;
    border-radius: var(--radius-xl);
    font-size: 1em;
    font-weight: 600;
    transition: opacity 0.4s ease, bottom 0.4s ease,
        background-color 5s ease-in-out, border-color 5s ease-in-out, box-shadow 5s ease-in-out, color 5s ease-in-out;
    background-color: var(--glass-bg);
    color: var(--text-dim);
    border-color: var(--glass-border);
}

.glass-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px var(--glass-shadow);
    color: var(--text-main);
}

.glass-button.primary {
    background-color: var(--accent);
    color: var(--tab-active-text);
    border-color: transparent;
}

.glass-button.primary:hover {
    background-color: var(--primary);
}

.glass-button.danger {
    background-color: var(--danger);
    color: white;
    border-color: transparent;
}

h2,
h3,
p.description,
.text-dim,
.version-info,
.form-group label,
.progress-bar-label {
    transition: color 5s ease-in-out;
}

#cancel-edit-button,
#cancel-edit-note-button {
    background-color: color-mix(in srgb, var(--glass-bg) 70%, #888);
}

/* --- History Tab --- */
.history-view {
    display: none;
}

/* Mobile Card View */
.history-card {
    padding: 15px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin-bottom: 15px;
}

.history-card-header {
    display: flex;
    font-size: 1.2em;
    justify-content: space-between;
    /* 주차 정보 왼쪽, 날짜 정보 오른쪽 정렬 */
    align-items: center;
    margin-top: 0px;
    margin-bottom: 0px;
}

.history-card-header h3 {
    font-size: 1.4em;
    margin-bottom: 2px;
    font-weight: 700;
    /* ← 더 굵게 추가 */
    margin-top: 0;
    /* ← 위 여백 제거 */
    margin-bottom: 2px;
}

.history-card-header .date-label {
    font-size: 0.85em;
    color: var(--text-dim);
}

.history-card-body {
    margin-top: 10px;
    margin-bottom: 10px;
    overflow: hidden;
}

.history-card-body .inner-table-wrapper {
    overflow-x: auto;
    padding-bottom: 8px;
    scrollbar-width: thin;
    scrollbar-color: var(--primary) transparent;
}

.history-card-body .inner-table-wrapper::-webkit-scrollbar {
    height: 6px;
}

.history-card-body .inner-table-wrapper::-webkit-scrollbar-thumb {
    background-color: var(--primary);
    border-radius: 3px;
}

.inner-history-table {
    border-collapse: collapse;
    width: max-content;
}

.inner-history-table th,
.inner-history-table td {
    padding: 4px 15px;
    text-align: center;
    vertical-align: middle;
    white-space: nowrap;
}

.inner-history-table th.label {
    font-size: 0.8em;
    font-weight: 500;
    color: var(--text-dim);
    padding-bottom: 8px;
    min-width: 90px;
}

.inner-history-table td.value {
    font-size: 1.2em;
    font-weight: 600;
    color: var(--text-main);
}

.history-card .button-group button:not(:last-child) {
    margin-right: 10px;
}

/* 모바일 뷰에서 카드가 넓어지는 것을 방지하기 위한 명시적 max-width */
@media (max-width: 768px) {
    .history-card {
        max-width: 100%;
        width: 100%;
    }

    .inner-table-wrapper {
        max-width: 100%;
    }
}

/* Desktop Table View (For Record and My tabs) */
#my-history-table-container table {
    width: 100%;
    border-collapse: collapse;
    white-space: nowrap;
}

#my-history-table-container th,
#my-history-table-container td {
    padding: 12px 15px;
    /* 패딩을 좀 더 여유롭게 */
    text-align: center;
    /* 모든 셀 중앙 정렬 */
    vertical-align: middle;
    font-size: 0.9em;
    border-bottom: 1px solid var(--glass-border);
}

#my-history-table-container td {
    color: var(--text-dim);
    /* 데이터 텍스트 색상 통일 */
}

#my-history-table-container td:first-child {
    color: var(--text-main);
    /* 첫번째 열 (날짜) 텍스트는 강조 */
    font-weight: 500;
}


#my-history-table-container th {
    background-color: var(--table-header-bg);
    color: var(--primary);
    position: sticky;
    top: 0;
    z-index: 2;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
}

#my-history-table-container th.sticky-col,
#my-history-table-container td.sticky-col {
    position: sticky;
    right: 0;
    z-index: 1;
    background-color: var(--glass-bg);
    border-left: 1px solid var(--glass-border);
}

#my-history-table-container th.sticky-col {
    z-index: 3;
}

#my-history-table-container tr:nth-child(even) {
    background-color: var(--table-row-stripe-bg);
}

#my-history-table-container tr:hover {
    background-color: var(--table-row-hover-bg);
}

#my-history-table-container .action-buttons {
    display: flex;
    /* 핵심: 버튼들을 flexbox로 묶어 하나의 단위로 처리 */
    justify-content: center;
    /* 버튼들을 셀 안에서 가로 중앙 정렬 */
    align-items: center;
    /* 세로 중앙 정렬 */
    gap: 8px;
    /* 버튼 사이의 간격 */
    padding: 5px 0;
    /* 버튼 상하 여백 추가 */
}

/* 관리 열 내부 버튼 크기 미세 조정 */
#my-history-table-container .action-buttons .glass-button {
    padding: 6px 15px;
    /* 버튼 패딩 축소 */
    font-size: 0.9em;
    /* 폰트 크기 약간 줄임 */
    flex-grow: 1;
    /* 공간을 균등하게 차지하도록 설정 */
    max-width: 80px;
    /* 버튼이 너무 커지지 않도록 최대 너비 제한 */
}

/* --- History Filter Styles --- */
#history-filter-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    margin: 20px 0;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--glass-border);
}

.filter-button {
    padding: 8px 12px;
    font-size: 0.85em;
    border: 1px solid var(--input-border);
    border-radius: var(--radius-s);
    cursor: pointer;
    background-color: var(--chart-button-bg);
    color: var(--text-dim);
    transition: var(--transition-fast);
}

.filter-button.active {
    background-color: var(--primary);
    border-color: var(--primary);
    color: white;
    font-weight: 600;
}

/* ** NEW ** Styles for sticky column */
#history-table-container th.sticky-col,
#history-table-container td.sticky-col {
    position: sticky;
    right: 0;
    z-index: 1;
    background-color: var(--glass-bg);
    /* 배경색 지정 필수 */
    border-left: 1px solid var(--glass-border);
    /* 구분선 */
}

#history-table-container th.sticky-col {
    z-index: 3;
    /* 헤더가 일반 셀 위로 오도록 */
}

#history-table-container tr:nth-child(even) {
    background-color: var(--table-row-stripe-bg);
}

#history-table-container tr:hover {
    background-color: var(--table-row-hover-bg);
}

.action-buttons .btn {
    padding: 5px 10px;
    font-size: 0.85em;
    border-radius: var(--radius-s);
}

/* ** NEW ** Margin for Save Targets button */
#save-targets-button {
    margin-top: 20px;
}

/* --- Report Tab --- */
.report-section {
    margin-bottom: 0;
    padding: 0;
    border: none;
}

.report-section .table-title {
    margin-top: 0;
}

.report-comparison-grid {
    display: grid;
    gap: 20px;
    margin-top: 30px;
}

.table-responsive {
    overflow-x: auto;
}

#my-history-table-container {
    max-height: 600px;
    overflow-y: auto;
}

#my-history-table-container table,
#history-table-container table {
    width: 100%;
    border-collapse: collapse;
    white-space: nowrap;
}

#my-history-table-container th,
#my-history-table-container td,
#history-table-container th,
#history-table-container td {
    padding: 12px 15px;
    text-align: center;
    vertical-align: middle;
    font-size: 0.9em;
    border-bottom: 1px solid var(--glass-border);
}

#my-history-table-container td,
#history-table-container td {
    color: var(--text-dim);
}

#my-history-table-container td:first-child,
#history-table-container td:first-child {
    color: var(--text-main);
    font-weight: 500;
}


#my-history-table-container th,
#history-table-container th {
    background-color: var(--table-header-bg);
    color: var(--primary);
    position: sticky;
    top: 0;
    z-index: 2;
    /* 헤더가 td보다 위 */
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
}

#my-history-table-container tr:nth-child(even),
#history-table-container tr:nth-child(even) {
    background-color: var(--table-row-stripe-bg);
}

#my-history-table-container tr:hover,
#history-table-container tr:hover {
    background-color: var(--table-row-hover-bg);
}

/* << 핵심 수정: 관리(sticky) 열 스타일 >> */
#my-history-table-container th.sticky-col,
#history-table-container th.sticky-col {
    position: sticky;
    right: 0;
    background-color: var(--glass-bg);
    /* 배경색 지정 필수 */
    border-left: 1px solid var(--glass-border);
    z-index: 3;
    /* 다른 헤더들보다도 위에 위치 */
}

#my-history-table-container td.sticky-col,
#history-table-container td.sticky-col {
    position: sticky;
    right: 0;
    background-color: var(--glass-bg);
    /* 배경색 지정 필수 */
    border-left: 1px solid var(--glass-border);
    z-index: 1;
    /* << 수정: 행(tr)보다 위에 위치하도록 z-index 부여 */
}

.comparison-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

/* comparison-table 관련 스타일 전체를 아래 코드로 교체합니다 */

.comparison-table th,
.comparison-table td {
    /* 상하 패딩을 줄여 행의 높이를 더 컴팩트하게 만듭니다. */
    padding: 10px 10px;
    border-bottom: 1px solid var(--glass-border);
    vertical-align: middle;
    /* 모든 셀 내용을 세로 중앙 정렬합니다. */
}

.comparison-table th {
    font-weight: 600;
    color: var(--primary);
    /* 헤더 텍스트(항목, 변화량)가 줄바꿈되지 않도록 설정합니다. */
    white-space: nowrap;
    /* 폰트 크기를 약간 줄여 공간을 확보합니다. */
    font-size: 0.9em;
}

/* 첫 번째 열 (체중, 근육량 등 항목 레이블) */
.comparison-table td:first-child {
    /* 폰트 크기를 줄여 줄바꿈을 방지하고 균형을 맞춥니다. */
    font-size: 0.75em;
    font-weight: 500;
    /* 레이블이 너무 좁아지지 않도록 최소 너비를 설정합니다. */
    min-width: 75px;
}

/* 마지막 열 (변화량 값) */
.comparison-table td:last-child {
    /* 기존보다 폰트 크기를 약간 줄여 전체적인 균형을 맞춥니다. */
    font-size: 0.9em;
    font-weight: 700;
    text-align: center;
    /* 값의 정렬이 틀어지지 않도록 고정 너비를 부여합니다. */
    width: 65px;
}

.positive-change {
    color: var(--positive);
}

.negative-change {
    color: var(--danger);
}

.target-achieved {
    color: var(--positive);
    font-weight: bold;
}

.report-comparison-grid .glass-card {
    padding: 20px;
}

/* ** NEW ** Progress Bar Styles */
.progress-bar-cell {
    vertical-align: middle !important;
    padding-top: 15px !important;
    padding-bottom: 35px !important;
    width: 60%;
    /* 바가 충분한 공간을 차지하도록 */
    padding-right: 60px;
}

.progress-bar-container {
    position: relative;
    height: 8px;
    width: 100%;
}

.progress-bar-track {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: var(--input-bg);
    border-radius: 4px;
    border: 1px solid var(--input-border);
}

.progress-bar-range {
    position: absolute;
    height: 100%;
    border-radius: 4px;
    opacity: 0.6;
}

.range-initial {
    background-color: #3498db;
}

/* Blue */
.range-prev {
    background-color: #2ecc71;
}

/* Green */
.range-target {
    background-color: #e67e22;
}

/* Orange */

.progress-bar-marker {
    position: absolute;
    top: 50%;
    width: 20px;
    height: 20px;

    /* Glass Effect (Dark Mode Default) */
    background-color: rgba(230, 230, 255, 0.2);
    /* 기본(다크모드) 유리를 더 밝게 */
    border: 1px solid rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);

    border-radius: 50%;

    transform: translate(-50%, -50%);
    z-index: 2;
    transition: var(--transition-fast);
}



.progress-bar-labels {
    position: relative;
    margin-top: 10px;
    height: 30px;
    /* 라벨을 위한 공간 */
}

.progress-bar-label {
    position: absolute;
    bottom: 0;
    /* 상하 위치는 기본값으로 유지 */
    transform: translateX(-50%);
    /* 기본적으로 중앙 정렬 */
    font-size: 0.7em;
    color: var(--text-dim);
    text-align: center;
    white-space: nowrap;
    transition: transform 0.2s ease-out;
}

/* 왼쪽으로 밀어내는 스타일 */
.progress-bar-label.stagger-left {
    transform: translateX(-95%);
    /* 라벨의 오른쪽 끝이 기준점에 맞춰지도록 이동 */
}

/* 오른쪽으로 밀어내는 스타일 */
.progress-bar-label.stagger-right {
    transform: translateX(-5%);
    /* 라벨의 왼쪽 끝이 기준점에 맞춰지도록 이동 */
}

.progress-bar-label span {
    font-weight: bold;
    color: var(--text-main);
}

.progress-bar-label.current span {
    color: var(--primary);
}

/* Chart */
.chart-container {
    position: relative;
    aspect-ratio: 16 / 9;
    min-height: 300px;
    width: 100%;
    margin: 10px auto;
    padding: 15px;
    border-radius: var(--radius-m);
    display: flex;
    /* Flexbox로 중앙 정렬 */
    justify-content: center;
    align-items: center;
}

.chart-controls {
    display: flex;
    /* 버튼들을 중앙 정렬하기 위해 flexbox로 변경 */
    flex-wrap: wrap;
    /* 버튼이 많으면 다음 줄로 넘어가도록 설정 */
    justify-content: center;
    /* 핵심: 수평 중앙 정렬 */
    gap: 8px;
}


.chart-select-button {
    padding: 8px 10px;
    font-size: 0.85em;
    border: 1px solid;
    /* 색상은 script.js에서 동적으로 지정 */
    border-radius: var(--radius-s);
    cursor: pointer;
    /* 기본 배경색 (다크 모드용) */
    background-color: var(--chart-button-bg);
    transition: var(--transition-fast);
}

.chart-select-button.active {
    font-weight: 600;
}

/* 라이트 모드일 때의 비활성 버튼 배경색 */
.light-mode .chart-select-button {
    background-color: rgba(0, 0, 0, 0.05);
}

.chart-bulk-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-start;
    margin-top: 15px;
}

/* --- Notes / Overview Tab --- */
.notes-controls {
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

#notes-list-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.note-card {
    padding: 20px;
}

.note-card h4 {
    margin: 0 0 8px 0;
    color: var(--primary);
}

.note-card .note-timestamp {
    font-size: 0.8em;
    color: var(--text-dim);
    margin-bottom: 10px;
}

.note-card .note-content-preview {
    font-family: var(--font-family);
    /* 폰트 일치 */
    font-size: 1em;
    /* 폰트 크기 일치 */
    line-height: 1.6;
    /* 줄 간격 일치 */
    white-space: pre-wrap;
    word-break: break-word;
    color: var(--text-dim);
    /* 입력창 placeholder와 비슷한 느낌으로 */
}

.note-actions {
    margin-top: 15px;
    text-align: right;
}

/* --- Settings Tab --- */
#tab-settings .settings-section {
    margin-bottom: 20px;
}

#tab-settings .button-group {
    justify-content: flex-start;
}

.warning {
    color: var(--warning-text);
    border: 1px solid color-mix(in srgb, var(--danger) 50%, transparent);
    background-color: color-mix(in srgb, var(--danger) 15%, transparent);
    padding: 15px;
    border-radius: var(--radius-m);
    margin-top: 10px;
    font-size: 0.9em;
}

.warning strong {
    color: var(--danger);
}

/* --- Popups and Modals --- */
.popup {
    position: fixed;
    bottom: -100px;
    left: 50%;
    transform: translateX(-50%);
    padding: 15px 30px;
    border-radius: var(--radius-xl);
    z-index: 1000;
    opacity: 0;
    font-weight: 600;
    text-align: center;
    background-color: var(--glass-bg);
    border: 1px solid var(--glass-border);
    box-shadow: 0 8px 32px 0 var(--glass-shadow);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: opacity 0.4s ease, bottom 0.4s ease,
        background-color 5s ease-in-out, border-color 5s ease-in-out, box-shadow 5s ease-in-out;
}

.popup.show {
    opacity: 1;
    bottom: 140px;
}

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
}

#initial-setup-popup .modal-content {
    /* 선택자를 더 구체적으로 변경 */
    max-width: 500px;
    width: 100%;
}

.modal-content h2 {
    margin-top: 0;
}

/* --- Visibility Helpers --- */
.mtf-only,
.ftm-only {
    display: block;
}

body.mode-ftm .mtf-only,
body.mode-mtf .ftm-only {
    display: none;
}

/* --- Responsive Design --- */

/* Tablet and Desktop */
@media (min-width: 768px) {
    .tab-bar-sticky-wrapper.is-fixed {
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 1000px;
        padding: 0 15px;
    }

    .report-comparison-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .report-comparison-grid .report-section:nth-child(3) {
        grid-column: 1 / span 2;
    }


    .history-view {
        display: none;
    }



    /* Show table on desktop */
}

/* Mobile */
@media (max-width: 767px) {

    /* --- 폰트 크기 최적화 --- */
    h2 {
        font-size: 1.4em;
    }

    h3 {
        font-size: 1.1em;
    }

    .sv-card h3 {
        font-size: 1.0em;
    }


    .glass-card,
    .glass-section {
        padding: 20px;
    }

    .history-view {
        display: none;
    }

    #history-cards-container.history-view {
        display: grid;
    }

    .input-grid {
        grid-template-columns: 1fr 1fr;
    }

    .input-category legend {
        display: block;
        margin-bottom: 12px;
    }

    .compound-input {
        flex-direction: column;
    }

    .compound-input input:first-child {
        margin-bottom: 10px;
    }

    .button-group {
        flex-direction: column;
    }

    .glass-button {
        width: 100%;
    }
}

/* 
     탭 버튼 관련 스타일도 삭제하여 데스크톱과 완전히 동일하게 만듭니다.
    .tab-button {
        flex: 1;
        flex-direction: column;
        padding: 6px 5px;
        gap: 2px;
        font-size: 0.65em;
    } 
    */

/* ... (이하 다른 모바일 스타일은 그대로 둡니다) ... */

.history-view {
    display: none;
}

#history-cards-container.history-view {
    display: grid;
}

.input-grid {
    grid-template-columns: 1fr 1fr;
}

.input-category legend {
    display: block;
    margin-bottom: 12px;
}

.compound-input {
    flex-direction: column;
}

.compound-input input:first-child {
    margin-bottom: 10px;
}

.button-group {
    flex-direction: column;
}

.glass-button {
    width: 100%;
}


/* --- Accordion Styles --- */
.accordion-group {
    margin-bottom: 20px;
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-m);
    transition: var(--transition-medium);
}

.accordion-group[open] {
    background-color: var(--glass-bg);
}

.accordion-title {
    font-size: 1.2em;
    font-weight: 600;
    color: var(--primary);
    padding: 15px 20px;
    cursor: pointer;
    list-style: none;
    /* 기본 화살표 숨기기 */
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.accordion-title::-webkit-details-marker {
    display: none;
    /* 기본 화살표 숨기기 (Chrome/Safari) */
}

.accordion-title::after {
    content: '+';
    font-size: 1.5em;
    color: var(--accent);
    transition: transform 0.3s;
}

.accordion-group[open]>.accordion-title::after {
    transform: rotate(45deg);
}

.accordion-group .input-category {
    border: none;
    padding: 0 20px 20px 20px;
    /* 제목과 겹치지 않도록 패딩 조정 */
}

/* fieldset 기본 스타일은 padding을 가지므로 아코디언 컨텐츠로서의 fieldset에서는 이를 제거합니다. */
.accordion-group>fieldset {
    padding: 0;
    margin: 0;
}

.accordion-group>fieldset .glass-section {
    border: none;
    padding: 20px;
}

/* --- UI Tweak: Accordion & Icon Buttons --- */

/* 수정2: 아코디언 내부 콘텐츠에 여백 추가 */
.accordion-content .input-grid {
    padding-top: 20px;
}

.accordion-content {
    padding: 0 20px 20px 20px;
    /* 약간의 전체 여백 */
}

/* glass-card가 아이콘 버튼의 위치 기준이 되도록 설정 */
.glass-card {
    position: relative;
}

/* 수정1: 아이콘 버튼 스타일 */
.glass-icon-button {
    position: absolute;
    top: 20px;
    right: 20px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 30%;
    /* 원형 버튼 */
    width: 44px;
    /* 크기 증가 */
    height: 44px;
    /* 크기 증가 */
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    color: var(--text-dim);
    transition: var(--transition-fast);
    padding: 0;
    /* 내부 SVG와의 간격 조절 */
}

.glass-icon-button:hover {
    color: var(--primary);
    transform: scale(1.1);
    border-color: var(--primary);
}

.glass-icon-button svg {
    width: 28px;
    height: 28px;
}

/* '뒤로가기' 버튼은 왼쪽 상단에 위치 */
#record-history-view .glass-icon-button {
    left: 20px;
    right: auto;
}

/* --- History/Input Toggle Buttons --- */
#show-input-button {
    width: auto;
    padding: 8px 15px;
    margin-bottom: 20px;
}

.sv-grid {
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

.sv-card {
    background-color: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-l);
    padding: 20px;
    display: flex;
    flex-direction: column;
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
    /* 
      Grid 아이템이 비정상적으로 커지는 것을 방지합니다. 
      Grid와 Flexbox에서 모두 유용한 트릭입니다.
    */
    min-width: 0;
    position: relative;
    /* 자식 ::before 요소의 기준점 */
    overflow: hidden;
}

/* 클릭 가능한 카드에 호버 효과 추가 */
.sv-card--clickable:hover {
    transform: translateY(-5px);
    border-color: var(--accent);
    cursor: pointer;
}

.sv-card h3 {
    margin-top: 0;
    font-size: 1.1em;
    color: var(--accent);
    display: flex;
    align-items: center;
    gap: 8px;
    /* 아이콘과 텍스트 간격 */
}

.sv-card-content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    /* 내용을 세로로 쌓도록 변경 */
    justify-content: center;
    align-items: center;
    text-align: center;
    color: var(--text-dim);
    transition: color 5s ease-in-out, color 5s ease-in-out;
}

.sv-card-widget {
    font-size: 1.1em;
    font-weight: 500;
}

.sv-card-widget .guide-icon {
    font-size: 2em;
    margin-bottom: 10px;
}



/* 동적 색상 클래스 (주간 가이드 카드 제외) */
.sv-card--new:not(#sv-card-guide) {
    background-color: rgba(52, 152, 219, 0.2);
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
}

.sv-card--dday:not(#sv-card-guide) {
    background-color: rgba(231, 76, 60, 0.3);
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
}

.sv-card--countdown-green:not(#sv-card-guide) {
    background-color: rgba(46, 204, 113, 0.2);
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
}

.sv-card--countdown-yellow:not(#sv-card-guide) {
    background-color: rgba(241, 196, 15, 0.2);
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
}

.sv-card--countdown-red:not(#sv-card-guide) {
    background-color: rgba(230, 126, 34, 0.3);
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
}

/* 데스크탑 레이아웃 (3열) */

@media (min-width: 1281px) {
    .sv-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

@media (max-width: 1280px) {
    .sv-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 790px) {
    .sv-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 570px) {
    .sv-grid {
        grid-template-columns: repeat(1, 1fr);
    }
}


/* --- SV Shortcut Card Styles --- */
#sv-card-shortcut .shortcut-content {
    font-size: 1.1em;
    font-weight: 500;
    line-height: 1.4;
    z-index: 3;
}

#sv-card-shortcut .countdown-days {
    font-size: 3.5em;
    /* 숫자 크게 */
    font-weight: 700;
    color: var(--primary);
    line-height: 1;
    margin: 5px 0;
    z-index: 3;
}

/* 동적 색상 클래스 */
.sv-card--new {
    background-color: rgba(52, 152, 219, 0.2);
}

/* 파란색 계열 */
.sv-card--dday {
    background-color: rgba(231, 76, 60, 0.3);
}

/* 붉은색 계열 */
.sv-card--countdown-green {
    background-color: rgba(46, 204, 113, 0.2);
}

/* 초록색 */
.sv-card--countdown-yellow {
    background-color: rgba(241, 196, 15, 0.2);
}

/* 노란색 */
.sv-card--countdown-red {
    background-color: rgba(230, 126, 34, 0.3);
}

/* 주황색 */
/* --- Progress Circle Styles --- */
.progress-circle-container {
    position: relative;
    width: 120px;
    /* 크기 조정 가능 */
    height: 120px;
    margin-bottom: 15px;
}

.progress-circle-bg {
    fill: none;
    stroke: var(--input-bg);
    stroke-width: 12;
}

.progress-circle-bar {
    fill: none;
    stroke: var(--primary);
    stroke-width: 12;
    stroke-linecap: round;
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
    transition: stroke-dashoffset 0.5s ease-out;
}

.progress-circle-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.8em;
    font-weight: 700;
    color: var(--text-main);
}

/* --- Modal Bottom Sheet Styles --- */
/* style.css 파일에서 아래 부분을 찾아 수정 또는 추가하세요. */

/* --- Modal Bottom Sheet Styles --- */

.modal-bottom-sheet-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(4px);
    z-index: 3000;
    display: flex;
    justify-content: center;
    align-items: flex-end;

    /* 기본 상태: 투명하고 보이지 않음 */
    opacity: 0;
    visibility: hidden;

    /* 애니메이션: opacity(투명도)만 0.3초 동안 부드럽게 변경 */
    transition: opacity 0.3s ease-out;
}

/* JS에 의해 .visible 클래스가 추가될 때의 스타일 */
.modal-bottom-sheet-overlay.visible {
    opacity: 1;
    visibility: visible;
}

.modal-bottom-sheet {
    background-color: var(--modal-bg);
    border-top: 1px solid var(--modal-border);
    width: 100%;
    max-width: 1200px;
    height: 90%;
    max-height: 90vh;
    border-top-left-radius: var(--radius-l);
    border-top-right-radius: var(--radius-l);
    box-shadow: 0 -8px 32px 0 var(--glass-shadow);
    display: flex;
    flex-direction: column;

    /* 애니메이션 시작 위치: 화면 아래쪽 바깥 */
    transform: translateY(100%);

    /* 애니메이션 설정: transform 속성의 변경을 0.3초 동안 부드럽게(ease-out) 처리 */
    transition: transform 0.3s ease-out;
}

/* .visible 클래스가 적용된 오버레이 내부의 모달 스타일 */
.modal-bottom-sheet-overlay.visible .modal-bottom-sheet {
    /* 애니메이션 종료 위치: 제자리(화면 안) */
    transform: translateY(0);
}

.modal-header {
    padding: 10px 20px;
    border-bottom: 1px solid var(--glass-border);
    text-align: center;
    position: relative;
    flex-shrink: 0;
}

.modal-handle {
    width: 40px;
    height: 5px;
    background-color: var(--glass-border);
    border-radius: 2.5px;
    margin: 0 auto 10px;
}

.modal-title {
    margin: 0;
    color: var(--primary);
    font-size: 1.2em;
}

.modal-close-btn {
    position: absolute;
    top: 50%;
    right: 15px;
    transform: translateY(-50%);
    background: none;
    border: none;
    font-size: 2.5em;
    line-height: 1;
    color: var(--text-dim);
    cursor: pointer;
    padding: 0 10px;
}

.modal-close-btn:hover {
    color: var(--text-main);
}

.modal-content {
    padding: 20px;
    overflow-y: auto;
    flex-grow: 1;
}

/* 모달이 열렸을 때 배경 스크롤 방지 */
body.modal-open {
    overflow: hidden;
}

/* --- Carousel Styles --- */
.carousel-container {
    position: relative;
    padding-bottom: 40px;
    /* 점(dots)을 위한 공간 확보 */
}

.carousel-wrapper {
    overflow: hidden;
    /* 좌우로 넘치는 아이템 숨김 */
    width: 100%;
}

.carousel-content {
    display: flex;
    /* 스냅 효과를 위한 설정 */
    scroll-snap-type: x mandatory;
    overflow-x: auto;
    /* 스크롤바 숨기기 */
    scrollbar-width: none;
    /* Firefox */
    -ms-overflow-style: none;
    /* IE and Edge */
    /* 부드러운 스크롤 효과 */
    scroll-behavior: smooth;
}

.carousel-content::-webkit-scrollbar {
    display: none;
    /* Chrome, Safari, and Opera */
}


.carousel-item {
    flex: 0 0 100%;
    /* 각 아이템이 부모 너비를 꽉 채우도록 */
    width: 100%;
    scroll-snap-align: center;
    /* 아이템이 중앙에 오도록 스냅 */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.carousel-dots {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
}

.carousel-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: var(--glass-border);
    transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.carousel-dot.active {
    background-color: var(--primary);
    transform: scale(1.2);
}

/* --- Keeps List Modal Styles --- */
.keeps-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.keeps-list-item {
    padding: 15px;
    margin: 0;
    /* glass-section의 기본 margin 제거 */
}

.keeps-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 0.9em;
}

.keeps-week {
    font-weight: 600;
    color: var(--primary);
}

.keeps-date {
    color: var(--text-dim);
}

.keeps-text {
    margin: 0 0 15px 0;
    line-height: 1.6;
    white-space: pre-wrap;
    /* 줄바꿈과 공백 유지 */
    word-break: break-word;
    /* 긴 단어 자동 줄바꿈 */
}

.keeps-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.keeps-actions .glass-button {
    padding: 6px 15px;
    font-size: 0.9em;
}

/* --- Keeps Carousel Specific Styles --- */
.carousel-item.keeps-preview {
    align-items: flex-start;
    /* 아이템 내용을 왼쪽 정렬 */
    text-align: left;
    padding: 0 10px;
    /* 좌우 약간의 여백 */
}

.keeps-preview .keeps-week {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 5px;
}

.keeps-preview .keeps-text-preview {
    font-size: 1em;
    color: var(--text-main);
    /* 여러 줄 말줄임 처리를 위한 스타일 */
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    /* 3줄까지 보이도록 설정 */
    -webkit-box-orient: vertical;
    line-height: 1.5;
    margin: 6px 6px;
}

/* --- Keeps Modal 추가 스타일 --- */
.keeps-modal-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 5px 15px 5px;
    margin-bottom: 15px;
    border-bottom: 1px solid var(--glass-border);
}

.sort-controls {
    display: flex;
    gap: 10px;
}

.control-btn,
.control-btn-icon {
    padding: 6px 12px;
    font-size: 0.9em;
    border: 1px solid var(--input-border);
    border-radius: var(--radius-s);
    cursor: pointer;
    background-color: transparent;
    color: var(--text-dim);
    transition: var(--transition-fast);
}

.control-btn:hover,
.control-btn-icon:hover {
    background-color: var(--input-bg);
    border-color: var(--primary);
    color: var(--primary);
}

.control-btn.active,
.control-btn-icon.active {
    background-color: var(--primary);
    border-color: var(--primary);
    color: white;
}

/* 아이콘 버튼 스타일 */
.control-btn-icon {
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.control-btn-icon svg {
    width: 18px;
    height: 18px;
    fill: currentColor;
}

.control-btn-icon .heart-fill {
    display: none;
}

.control-btn-icon.active .heart-fill {
    display: block;
}

.control-btn-icon.active .heart-outline {
    display: none;
}

.keeps-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.keeps-like-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    transition: color 0.2s, transform 0.2s;
}

.keeps-like-btn:hover {
    color: var(--danger);
    transform: scale(1.2);
}

.keeps-like-btn svg {
    width: 20px;
    height: 20px;
}

/* SVG 내부 경로 스타일 */
.keeps-like-btn .heart-fill {
    fill: transparent;
    transition: fill 0.2s;
}

.keeps-like-btn .heart-outline {
    stroke: currentColor;
    stroke-width: 2;
}

/* '좋아요'가 눌린 상태 스타일 */
.keeps-like-btn.liked {
    color: var(--danger);
}

.keeps-like-btn.liked .heart-fill {
    fill: var(--danger);
}

.keeps-like-btn.liked .heart-outline {
    stroke: none;
}

/* --- Settings Toggle Switch Styles --- */
.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.setting-item label {
    font-weight: 500;
    color: var(--text-main);
    transition: color 5s ease-in-out;
}

.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
    flex-shrink: 0;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--input-bg) 5s ease-in-out;
    border: 1px solid var(--input-border);
    transition: var(--transition-fast) 5s ease-in-out;
    transition: color 5s ease-in-out, background-color 5s ease-in-out, ;
}

.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background-color: var(--text-dim);
    transition: var(--transition-fast) 5s ease-in-out;

    transition: background-color 5s ease-in-out, ;
}

.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}

input:checked+.slider {
    background-color: var(--accent);
    border-color: var(--accent);
}

input:checked+.slider:before {
    transform: translateX(22px);
    background-color: white;
}

/* --- My Tab Section Styles --- */
.my-section {
    /* 개별 섹션 아래쪽에 마진을 주어 일관성 유지 */
    margin-bottom: 25px;
}

/* --- My Tab History View Styles --- */
#my-history-table-container {
    max-height: 600px;
    /* 테이블이 너무 길어지는 것을 방지하고 내부 스크롤 생성 */
    overflow-y: auto;
}

/* --- Custom Scrollbar Styles --- */
/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--primary) transparent;
}

/* Chrome, Edge, and Safari */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background-color: var(--primary);
    border-radius: 10px;
    border: 2px solid transparent;
    /* Creates padding around thumb */
    background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
    background-color: var(--accent);
}

/* --- Comparison Modal Tab Styles --- */
.modal-tab-switcher {
    display: flex;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-s);
    padding: 4px;
    width: fit-content;
    margin: 0 auto;
    /* 중앙 정렬 */
}

.modal-tab-btn {
    padding: 6px 16px;
    border: none;
    background-color: transparent;
    color: var(--text-dim);
    font-weight: 500;
    cursor: pointer;
    border-radius: var(--radius-s);
    transition: all var(--transition-fast);
}

.modal-tab-btn.active {
    background-color: var(--glass-bg1);
    color: var(--text-main);
    font-weight: 600;
}

.modal-content-wrapper {
    flex-grow: 1;
    overflow: hidden;
    /* 탭 전환 시 스크롤바 문제 방지 */
    position: relative;
}

.modal-tab-content {
    display: none;
    height: 100%;
    overflow-y: auto;
    padding: 20px;
}

.modal-tab-content.active {
    display: block;
}

/* --- Hormone Report Modal Styles --- */
.hormone-report-container {
    display: flex;
    flex-direction: column;
    gap: 25px;
}

.chart-section h4 {
    margin-top: 0;
    margin-bottom: 15px;
    color: var(--text-main);
    text-align: center;
}

.chart-wrapper {
    height: 250px;
    /* 그래프의 높이를 지정 */
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.15);
    border-radius: var(--radius-m);
}

.light-mode .chart-wrapper {

    background-color: color-mix(in srgb, #ff6f91 5%, transparent);
}


/* --- Selected Week Data in Hormone Modal --- */
.selected-week-data-container,
#comparison-selected-week-data-container {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--glass-border);
}

.selected-week-data-container h4 {
    text-align: center;
    color: var(--text-main);
    margin-bottom: 15px;
}

.selected-week-data-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    font-size: 0.9em;
}

/* 안내 문구 스타일 추가 */
.selected-week-data-container .placeholder-text {
    text-align: center;
    padding: 20px 0;
    color: var(--text-dim);
    font-size: 0.9em;
}

.data-item {
    background-color: rgba(0, 0, 0, 0.15);
    border-radius: var(--radius-s);
    padding: 10px;
}

.data-item-label {
    color: var(--text-dim);
    font-weight: 500;
    margin-bottom: 5px;
    display: block;
}

.data-item-value {
    color: var(--text-main);
    font-weight: 600;
    white-space: pre-wrap;
    word-break: break-word;
}

/* --- Comparison Modal 'Flow View' Styles --- */
.comparison-report-container {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.comparison-filter-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    /* 이 줄을 추가하세요 */
    gap: 8px;
    padding-bottom: 15px;
    margin-bottom: 15px;
    border-bottom: 1px solid var(--glass-border);
    flex-shrink: 0;
}

/* 필터 버튼 스타일 재사용 */
.comparison-filter-controls .filter-button {
    /* 기존 .filter-button 스타일이 대부분 적용됩니다. */
}

/* 비교 모달의 차트는 더 크게 표시 */
.comparison-report-container .chart-section {
    flex-shrink: 0;
}

.comparison-report-container .chart-wrapper {
    height: 300px;
}

.light-mode .comparison-report-container .chart-wrapper {
    height: 300px;

    background-color: color-mix(in srgb, var(--primary) 5%, transparent);
}

.light-mode .comparison-filter-controls .filter-button {
    background-color: color-mix(in srgb, var(--primary) 10%, transparent);
    border-color: color-mix(in srgb, var(--primary) 30%, transparent);
    color: var(--text-main);
}

#comparison-table-container {
    flex-grow: 1;
    /* 남은 공간을 모두 차지 */
    overflow: auto;
    /* 테이블이 길어지면 상하좌우 스크롤 */
    margin-top: 20px;
}

/* 비교 테이블 스타일은 #my-history-table-container 와 공유하여 일관성 유지 */
#comparison-table-container table {
    width: 100%;
    border-collapse: collapse;
}

#comparison-table-container th,
#comparison-table-container td {
    padding: 10px 12px;
    text-align: center;
    vertical-align: middle;
    font-size: 0.9em;
    border: 1px solid var(--glass-border);
    /* 구분선을 더 명확하게 */
    white-space: nowrap;
}

#comparison-table-container th {
    background-color: var(--table-header-bg);
    color: var(--primary);
    position: sticky;
    top: 0;
    z-index: 2;
}

/* 테이블의 첫 번째, 두 번째 열(주차, 날짜) 고정 */
#comparison-table-container th:nth-child(1),
#comparison-table-container td:nth-child(1),
#comparison-table-container th:nth-child(2),
#comparison-table-container td:nth-child(2) {
    position: sticky;
    left: 0;
    background-color: var(--glass-bg);
}

#comparison-table-container th:nth-child(1),
#comparison-table-container th:nth-child(2) {
    z-index: 3;
}

/* 두 번째 열은 약간의 간격을 둠 */
#comparison-table-container th:nth-child(2),
#comparison-table-container td:nth-child(2) {
    left: 60px;
    /* 첫 번째 열의 너비에 따라 조정 필요 */
}

#comparison-table-container td.active-col {
    background-color: var(--table-row-hover-bg);
    color: var(--text-main);
    font-weight: 600;
}

.comparison-actions {
    /* 부모 flex 컨테이너의 전체 너비를 차지하도록 설정 */
    flex-basis: 100%;
    /* 내부 아이템(버튼)들을 중앙으로 정렬 */
    display: flex;
    justify-content: center;
    gap: 10px;
    /* 상단 버튼들과의 간격 */
    margin-top: 15px;
}

/* --- 모달 내부 탭 스타일 --- */
.modal-content-wrapper {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.modal-tab-switcher {
    display: flex;
    justify-content: center;
    border-radius: var(--radius-xl);
    /* 더 둥글게 변경 */
    padding: 4px;
    width: fit-content;
    margin: 0 auto;
    transition: background-color var(--transition-medium);
}

.modal-tab-btn {
    padding: 6px 16px;
    border: none;
    background-color: transparent;
    color: var(--text-dim);
    font-weight: 500;
    cursor: pointer;
    border-radius: var(--radius-xl);
    /* 더 둥글게 변경 */
    transition: all var(--transition-fast);
}

.modal-tab-btn.active {
    background-color: var(--accent);
    /* 활성 탭 배경색 변경 */
    color: white;
    /* 활성 탭 텍스트 색상 변경 */
    font-weight: 600;
    box-shadow: 0 2px 8px color-mix(in srgb, var(--accent) 30%, transparent);
}

.modal-tab-content {
    display: none;
    flex-grow: 1;
    overflow-y: auto;
}

.modal-tab-content.active {
    display: block;
}

/* 라이트 모드일 때의 모달 탭 스타일 */
body.light-mode .modal-tab-switcher {
    background-color: color-mix(in srgb, var(--primary) 10%, transparent);
    border-radius: var(--radius-xl);
    /* 더 둥글게 */
}

body.light-mode .modal-tab-btn {
    border-radius: var(--radius-xl);
    /* 더 둥글게 */
}

body.light-mode .modal-tab-btn.active {
    background-color: var(--primary);
    color: white;
    box-shadow: 0 2px 8px color-mix(in srgb, var(--primary) 30%, transparent);
}


/* --- 비교 분석 뷰 스타일 --- */
.comparison-view-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.comparison-selectors {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--glass-border);
}

.comparison-results-grid {
    display: grid;
    grid-template-columns: auto 1fr 1fr;
    /* 항목명, 값1, 값2 */
    gap: 10px 15px;
    align-items: center;
}

.comparison-item-header {
    font-weight: 600;
    color: var(--primary);
    text-align: center;
    grid-column: span 1;
}

.comparison-item-header.label {
    text-align: left;
}


.comparison-item-label {
    font-weight: 500;
    color: var(--text-dim);
    text-align: right;
}

.comparison-item-value {
    font-size: 1.2em;
    font-weight: 600;
    color: var(--text-main);
    background-color: rgba(0, 0, 0, 0.1);
    padding: 10px;
    border-radius: var(--radius-s);
    text-align: center;
}

.light-mode .comparison-item-value {
    background-color: color-mix(in srgb, #ff6f91 5%, transparent);
    border: 1px solid rgba(222, 180, 200, 0.5);
    /* 테두리를 추가하여 구분감을 줍니다 */
}



/* --- 목표 달성도 모달 테이블 스타일 --- */
.progress-comparison-table td:first-child {
    font-size: 0.9em;
    /* 항목 이름 폰트 크기 */
    min-width: 90px;
}

.progress-comparison-table td:last-child {
    font-size: 1.1em;
    /* 변화량/달성률 폰트 크기 */
    font-weight: 700;
    text-align: right;
    /* 오른쪽 정렬 */
    width: 80px;
    padding-right: 15px;
    /* 오른쪽 여백 */
}

#my-history-filter-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    /* 버튼 사이의 간격 */
    margin-bottom: 25px;
    /* 수정: 테이블과의 하단 여백 추가 */
    padding-bottom: 20px;
    border-bottom: 1px solid var(--glass-border);
}

/* style.css 파일 맨 아래에 추가 */

/* --- Carousel Navigation Buttons --- */
.carousel-nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    background-color: transparent;
    border: none;
    color: var(--text-dim);
    font-size: 2em;
    font-weight: bold;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    display: none;
    /* 기본적으로는 숨김 */
}

/* 데스크톱 (호버 가능한 기기) 에서만 보이도록 설정 */
@media (hover: hover) {
    .carousel-nav-btn {
        display: flex;
        /* flex로 변경하여 내부 텍스트 중앙 정렬 */
        justify-content: center;
        align-items: center;
    }
}

/* 카드에 마우스를 올렸을 때 버튼이 나타나도록 함 */
.carousel-container:hover .carousel-nav-btn {
    opacity: 0.7;
}

.carousel-nav-btn:hover {
    opacity: 1;
    background-color: var(--glass-bg);
    color: var(--primary);
}

.carousel-nav-btn.prev {
    left: 5px;
}

.carousel-nav-btn.next {
    right: 5px;
}

/* 바텀 시트 모달 내부의 콘텐츠 래퍼 스타일 */
.hormone-report-container,
.modal-content-wrapper,
.keeps-list {
    max-width: 1100px;
    /* 콘텐츠 최대 너비를 1100px로 확장 */
    width: 100%;
    margin-left: auto;
    /* 좌우 마진을 auto로 설정하여 중앙 정렬 */
    margin-right: auto;
}

/* 호르몬 모달 범주 버튼 컨테이너 */
.hormone-legend-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    margin-bottom: 15px;
    /* 차트와의 간격 */
}

.hormone-legend-controls .legend-button {
    padding: 8px 12px;
    font-size: 0.85em;
    font-weight: 600;
    border: 1px solid;
    /* 테두리 두께 1px로 통일 */
    border-radius: var(--radius-s);
    cursor: pointer;
    transition: var(--transition-fast);
}

/* 비활성화된 범주 버튼 스타일 (측정 상세 분석과 통일) */
.hormone-legend-controls .legend-button.inactive {
    background-color: transparent !important;
    /* JS가 지정한 배경색을 투명으로 덮어쓰기 */
    color: var(--text-dim) !important;
    /* JS가 지정한 글씨색을 희미하게 덮어쓰기 */
}

/* 클릭 가능한 카드에 아이콘을 넣기 위한 사전 작업 */
.sv-card--clickable {
    position: relative;
    /* 자식 요소를 절대 위치로 지정하기 위함 */
}

/* ::after 가상 요소를 사용해 아이콘을 추가 */
.sv-card--clickable::after {
    content: '';
    /* 가상 요소는 content 속성이 필수 */
    position: absolute;
    top: 15px;
    /* 하단에서의 위치 */
    right: 15px;
    /* 오른쪽에서의 위치 */
    width: 24px;
    /* 아이콘 너비 */
    height: 24px;
    /* 아이콘 높이 */

    /* Data URI를 사용해 SVG 아이콘 삽입 및 색상 제어 */
    background-color: var(--text-dim);
    /* 아이콘 기본 색상 */
    -webkit-mask: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3e%3cpath d='M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z'/%3e%3c/svg%3e") no-repeat center / contain;
    mask: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3e%3cpath d='M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z'/%3e%3c/svg%3e") no-repeat center / contain;

    opacity: 0.6;
    /* 기본 투명도 */
    transition: all 0.3s ease;
    /* 부드러운 전환 효과 */
    pointer-events: none;
    /* 아이콘이 카드 클릭을 방해하지 않도록 함 */
}

/* 카드에 마우스를 올렸을 때 아이콘 스타일 변경 */
.sv-card--clickable:hover::after {
    opacity: 1;
    /* 아이콘을 진하게 */
    background-color: var(--primary);
    /* 기본 색상으로 변경 */
    transform: scale(1.1);
    /* 약간 확대되는 효과 */
}

/* --- Hormones Card UI Enhancement --- */
.sv-card-content .hormone-item {
    width: 100%;
}

/* --- 카드 배경 이미지 추가 --- */
.sv-card::before {
    content: '';
    position: absolute;
    bottom: -45px;
    /* 아래쪽으로 살짝 이동 */
    right: -10px;
    /* ★★★ 핵심: left 대신 right 기준으로 위치 지정 */
    width: 260px;
    height: 260px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: bottom right;
    /* 이미지 자체도 우측 하단 정렬 */
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    z-index: 0;
    pointer-events: none;
    /* 마스크도 우측 기준에 맞게 수정 */
    mask-image: linear-gradient(to top, black 70%, transparent 100%), linear-gradient(to left, black 70%, transparent 100%);
    -webkit-mask-image: linear-gradient(to top, black 80%, transparent 100%), linear-gradient(to right, black 80%, transparent 100%);
    mask-composite: intersect;
    -webkit-mask-composite: source-in;
}

/* 이미지가 있는 카드에만 적용 */
.sv-card.sv-card-with-image::before {
    opacity: 0.5;
    /* 기본 투명도 */
}

/* 각 카드별 이미지 지정 */
.sv-card.sv-card-image-write::before {
    background-image: url('./assets/Write.png');
}

.sv-card.sv-card-image-good::before {
    background-image: url('./assets/Good.png');
}

.sv-card.sv-card-image-normal::before {
    background-image: url('./assets/Normal.png');
}

.sv-card.sv-card-image-bad::before {
    background-image: url('./assets/Bad.png');
}

.sv-card.sv-card-image-nothing::before {
    background-image: url('./assets/Nothing.png');
}

.sv-card.sv-card-image-keeps::before {
    background-image: url('./assets/Keeps.png');
}

/* 카드에 마우스를 올렸을 때 이미지 더 선명하게 (선택사항) */
.sv-card.sv-card-with-image:hover::before {
    opacity: 0.9;
}




.hormone-item-row {
    display: flex;
    /* align-items를 center로 변경하여 수직 중앙 정렬 */
    align-items: center;
    gap: 15px;
}

.hormone-progress-bar-container {
    flex-grow: 1;
    /* Take up available space */
    min-width: 0;
    /* Prevent overflow issues */
}

/* Override the default progress-bar-cell for this specific card layout */
.hormone-progress-bar-container .progress-bar-cell {
    width: 100%;
    /* 수직 정렬을 위해 상하 패딩을 제거하고, 라벨을 위한 공간만 확보 */
    padding: 0 0 30px 0 !important;
}


.hormone-weekly-change {
    flex-shrink: 0;
    width: auto;
    min-width: 75px;
    text-align: center;
    padding-left: 15px;
    border-left: 1px solid var(--glass-border);
}

.hormone-weekly-change .change-label {
    font-size: 0.75em;
    color: var(--text-dim);
    display: block;
}

.hormone-weekly-change .change-value {
    font-size: 1.6em;
    font-weight: 700;
    line-height: 1.2;
    display: block;
}

/* --- Hormone Modal Analysis Cards Enhancement --- */
.analysis-card-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
    /* 간격 살짝 줄임 */
    width: 100%;
    margin-top: 5px;
}

.analysis-item {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    font-size: 0.9em;
    padding: 6px 0;
    border-bottom: 1px solid var(--glass-border);
}

.analysis-item:last-child {
    border-bottom: none;
}

.analysis-label {
    color: var(--text-dim);
    font-size: 0.9em;
    /* 라벨 폰트 크기 살짝 줄임 */
}

.analysis-value {
    font-weight: 600;
    color: var(--text-main);
    font-size: 1.1em;
}

#hormone-analysis-text .table-title {
    margin-top: 25px;
    margin-bottom: 15px;
    font-size: 1.1em;
}

#hormone-analysis-text .table-title:first-of-type {
    margin-top: 0;
}

/* 카드 제목 아래 현재 수치 표시를 위한 스타일 */
.analysis-card-subtitle {
    font-size: 0.8em;
    color: var(--text-dim);
    margin: -10px 0 10px 2px;
    /* 위치 미세 조정 */
    text-align: left;
    width: 100%;
}

#hormone-analysis-text .table-title {
    margin-top: 25px;
    margin-bottom: 0px;
    font-size: 1.1em;
}

#hormone-analysis-text .table-title:first-of-type {
    margin-top: 0;
}



/* 1. '주간 가이드' 카드 기본 스타일 */
#sv-card-guide {
    border-width: 3px;
    /* 요청사항: 테두리 두껍게 */
    background-color: var(--glass-bg) !important;
    /* 다른 스타일에 의해 배경색이 덮어씌워지지 않도록 !important 추가 */
    transition: border-color 0.5s ease;
    /* 테두리 색상 애니메이션 */
    justify-content: flex-end;
    /* 컨텐츠(텍스트)를 카드 하단으로 정렬 */
    align-items: center;
    /* 컨텐츠를 중앙 정렬 */
    min-height: 220px;
    transition: background-color 5s ease-in-out, color 5s ease-in-out;
}

/* 2. 상태에 따른 테두리 색상 변경 */
#sv-card-guide.sv-card--countdown-green {
    border-color: var(--positive);
    /* 초록색 */
}

#sv-card-guide.sv-card--countdown-yellow {
    border-color: #f1c40f;
    /* 노란색 */
}

#sv-card-guide.sv-card--dday {
    border-color: #e67e22;
    /* 주황색 */
}

#sv-card-guide.sv-card--countdown-red,
#sv-card-guide.sv-card--dday.sv-card-image-bad {
    border-color: var(--danger);
    /* 붉은색 */
}

/* 3. '주간 가이드' 카드 제목(h3) 위치 */
#sv-card-guide h3 {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 2;
    font-size: 1em;
}

/* 4. '주간 가이드' 카드 내용(p) 스타일 및 위치 */
#sv-card-guide .sv-card-content p {
    position: relative;
    z-index: 3;
    /* 이미지보다 위에 오도록 설정 */
    font-size: 1.1em;
    /* 요청사항: 폰트 크게 */
    font-weight: 500;
    /* 요청사항: 폰트 볼드 처리 */
    color: var(--accent);
    /* 요청사항: 강조 색상 적용 */
    line-height: 1.4;
    /* 이미지에 나온 것처럼 부드러운 네온 효과 추가 */
    text-shadow: 0 0 15px var(--bg-main), 0 0 15px var(--bg-main), 0 0 15px var(--bg-main), 0 0 15px var(--bg-main);
    margin-bottom: 20px;
    transition: text-shadow 5s ease-in-out, color 5s ease-in-out;
}

#sv-card-keeps .sv-card-content,
.keeps.text.preview,
.keeps-preview {
    position: relative;
    z-index: 3;
    text-shadow: 0 0 15px var(--bg-main), 0 0 15px var(--bg-main);
    transition: text-shadow 5s ease-in-out, color 5s ease-in-out;
}

/* 5. 이미지(::before)의 z-index를 텍스트(z-index:1)보다 낮게 설정 */
#sv-card-guide.sv-card-with-image::before {
    z-index: 0;
}

.drug-influence-grid {
    position: relative;
    /* 자식 요소의 위치 기준점 */
}

.drug-influence-grid>.sv-card {
    position: relative;
    /* 가상 요소의 위치 기준점 */
}

/* 첫 번째 카드를 제외한 나머지 카드의 앞에 구분선 추가 */
.drug-influence-grid>.sv-card:not(:first-child)::before {
    content: '';
    position: absolute;
    /* 카드의 세로 중앙 부분에 위치하도록 설정 */
    top: 15%;
    bottom: 15%;
    /* 카드의 왼쪽에, 그리드 간격(gap)의 절반만큼 이동하여 중앙에 배치 */
    left: -10px;
    /* .sv-grid의 gap이 20px이므로 절반인 10px 이동 */
    width: 1px;
    background-color: var(--glass-border);
}
/* 설정 탭 내부의 h3 태그의 기본 마진을 제거하여 정렬을 맞춥니다. */
#tab-settings .setting-item > h3 {
    margin: 0;
}

/* 설정 탭의 description 단락의 상단 마진을 통일합니다. */
#tab-settings .setting-item + .description {
    margin-top: 15px;
}

/* 설정 탭의 select 드롭다운 너비를 조정하여 보기 좋게 만듭니다. */
#tab-settings .setting-item > select {
    width: 50%;
    max-width: 180px; /* 너무 넓어지지 않도록 최대 너비 설정 */
}